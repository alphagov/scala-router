Getting Scala 2.8.1 (for sbt)...
downloading http://repo1.maven.org/maven2/org/scala-lang/scala-compiler/2.8.1/scala-compiler-2.8.1.jar ...
	[SUCCESSFUL ] org.scala-lang#scala-compiler;2.8.1!scala-compiler.jar (6114ms)
downloading http://repo1.maven.org/maven2/org/scala-lang/scala-library/2.8.1/scala-library-2.8.1.jar ...
	[SUCCESSFUL ] org.scala-lang#scala-library;2.8.1!scala-library.jar (5537ms)
downloading http://repo1.maven.org/maven2/jline/jline/0.9.91/jline-0.9.91.jar ...
	[SUCCESSFUL ] jline#jline;0.9.91!jline.jar (953ms)
:: retrieving :: org.scala-tools.sbt#boot-scala
	confs: [default]
	3 artifacts copied, 0 already retrieved (15178kB/103ms)
Getting org.scala-tools.sbt sbt_2.8.1 0.10.1 ...
Getting org.scala-tools.sbt sbt_2.8.1 0.10.1 ...
[0m[[0minfo[0m] [0mLoading project definition from /Volumes/raid/mwall/dev/gov/alphagov/router/project[0m
[0m[[0minfo[0m] [0mSet current project to router (in build file:/Volumes/raid/mwall/dev/gov/alphagov/router/)[0m
[0m[[0minfo[0m] [0mCompiling 1 Scala source to /Volumes/raid/mwall/dev/gov/alphagov/router/router/target/scala-2.9.0-1/classes...[0m
13:01:04,988 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
13:01:04,988 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback-test.xml] at [file:/Volumes/raid/mwall/dev/gov/alphagov/router/router/target/scala-2.9.0-1/test-classes/logback-test.xml]
13:01:05,075 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
13:01:05,076 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
13:01:05,079 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
13:01:05,130 |-WARN in ch.qos.logback.core.ConsoleAppender[STDOUT] - This appender no longer admits a layout as a sub-component, set an encoder instead.
13:01:05,130 |-WARN in ch.qos.logback.core.ConsoleAppender[STDOUT] - To ensure compatibility, wrapping your layout in LayoutWrappingEncoder.
13:01:05,130 |-WARN in ch.qos.logback.core.ConsoleAppender[STDOUT] - See also http://logback.qos.ch/codes.html#layoutInsteadOfEncoder for details
13:01:05,130 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
13:01:05,130 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDERR]
13:01:05,131 |-WARN in ch.qos.logback.core.ConsoleAppender[STDERR] - This appender no longer admits a layout as a sub-component, set an encoder instead.
13:01:05,131 |-WARN in ch.qos.logback.core.ConsoleAppender[STDERR] - To ensure compatibility, wrapping your layout in LayoutWrappingEncoder.
13:01:05,131 |-WARN in ch.qos.logback.core.ConsoleAppender[STDERR] - See also http://logback.qos.ch/codes.html#layoutInsteadOfEncoder for details
13:01:05,131 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to INFO
13:01:05,131 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]

[0m[[0minfo[0m] [0m[32mApplicationsTest:[0m[0m
[0m[[0minfo[0m] [0m[32m- canCreateApplication[0m[0m
[0m[[0minfo[0m] [0m[32m- Can delete application[0m[0m
[0m[[0minfo[0m] [0m[32m- None is returned when attempting to load non-existent application[0m[0m
********* STARTING /router on port 8080 *********
13:01:05.814 [pool-6-thread-3] INFO  org.eclipse.jetty.util.log - jetty-7.3.1.v20110307
13:01:06.272 [pool-6-thread-3] INFO  org.eclipse.jetty.util.log - started o.e.j.w.WebAppContext{/router,file:/Volumes/raid/mwall/dev/gov/alphagov/router/router/src/main/webapp/},/Volumes/raid/mwall/dev/gov/alphagov/router/router/src/main/webapp/
13:01:06.422 [pool-6-thread-3] INFO  org.eclipse.jetty.util.log - Started SelectChannelConnector@0.0.0.0:8080
********* STARTED /router on port 8080 *********
13:01:06.861 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016466423?backend_url=localhost%3A8080%2Frouter completed in 138 ms
13:01:06.943 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/prefixtest?route_type=prefix&application_id=integration-test-1321016466423 completed in 44 ms
13:01:06.951 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/fulltest/test.html?route_type=full&application_id=integration-test-1321016466423 completed in 5 ms
13:01:06.960 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/test-harness?route_type=full&application_id=integration-test-1321016466423 completed in 6 ms
13:01:06.967 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/redirect?route_type=full&application_id=integration-test-1321016466423 completed in 5 ms
13:01:06.977 [qtp909896860-110] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/this-route-does-not-exist-on-the-backend-server?route-type=full&application-id=integration-test-1321016466423 caused exception after 2 ms
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:06.978 [qtp909896860-110] WARN  org.eclipse.jetty.util.log - /router/routes/test/this-route-does-not-exist-on-the-backend-server
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.005 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016467000?backend_url=localhost%3A8080%2Frouter completed in 3 ms
13:01:07.036 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016467000?backend_url=localhost%3A8080%2Frouter completed in 3 ms
13:01:07.043 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /applications/integration-test-1321016467000 completed in 5 ms
13:01:07.055 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - PUT /applications/integration-test-1321016467000?backend_url=new_backend_url completed in 9 ms
13:01:07.062 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - DELETE /applications/integration-test-1321016467000 completed in 4 ms
13:01:07.067 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /applications/integration-test-1321016467000 completed in 2 ms
13:01:07.079 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016467073?backend_url=localhost%3A8080%2Frouter completed in 4 ms
13:01:07.087 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/prefixtest?route_type=prefix&application_id=integration-test-1321016467073 completed in 6 ms
13:01:07.094 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/fulltest/test.html?route_type=full&application_id=integration-test-1321016467073 completed in 5 ms
13:01:07.100 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/test-harness?route_type=full&application_id=integration-test-1321016467073 completed in 4 ms
13:01:07.108 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/redirect?route_type=full&application_id=integration-test-1321016467073 completed in 5 ms
13:01:07.113 [qtp909896860-112] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/this-route-does-not-exist-on-the-backend-server?route-type=full&application-id=integration-test-1321016467073 caused exception after 3 ms
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.114 [qtp909896860-112] WARN  org.eclipse.jetty.util.log - /router/routes/test/this-route-does-not-exist-on-the-backend-server
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.124 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - PUT /applications/this-app-does-not-exist?backend_url=foo completed in 3 ms
13:01:07.132 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016467126?backend_url=localhost%3A8080%2Frouter completed in 4 ms
13:01:07.139 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/prefixtest?route_type=prefix&application_id=integration-test-1321016467126 completed in 5 ms
13:01:07.145 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/fulltest/test.html?route_type=full&application_id=integration-test-1321016467126 completed in 4 ms
13:01:07.152 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/test-harness?route_type=full&application_id=integration-test-1321016467126 completed in 4 ms
13:01:07.159 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/redirect?route_type=full&application_id=integration-test-1321016467126 completed in 4 ms
13:01:07.164 [qtp909896860-110] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/this-route-does-not-exist-on-the-backend-server?route-type=full&application-id=integration-test-1321016467126 caused exception after 2 ms
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.165 [qtp909896860-110] WARN  org.eclipse.jetty.util.log - /router/routes/test/this-route-does-not-exist-on-the-backend-server
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.174 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/integration-test-1321016467168?route_type=full&application_id=integration-test-1321016467126 completed in 4 ms
13:01:07.182 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /route-for/integration-test-1321016467168 completed in 4 ms
13:01:07.188 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/update-application?backend_url=localhost%3A8080%2Frouter completed in 4 ms
13:01:07.194 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/prefixtest?route_type=prefix&application_id=update-application completed in 4 ms
13:01:07.200 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/fulltest/test.html?route_type=full&application_id=update-application completed in 4 ms
13:01:07.206 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/test-harness?route_type=full&application_id=update-application completed in 4 ms
13:01:07.211 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/redirect?route_type=full&application_id=update-application completed in 3 ms
13:01:07.216 [qtp909896860-110] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/this-route-does-not-exist-on-the-backend-server?route-type=full&application-id=update-application caused exception after 2 ms
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.222 [qtp909896860-110] WARN  org.eclipse.jetty.util.log - /router/routes/test/this-route-does-not-exist-on-the-backend-server
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.232 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - PUT /routes/integration-test-1321016467168?route_type=full&application.application_id=update-application completed in 5 ms
13:01:07.238 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - DELETE /routes/integration-test-1321016467168 completed in 3 ms
13:01:07.243 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /route-for/integration-test-1321016467168 completed in 3 ms
13:01:07.254 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016467245?backend_url=localhost%3A8080%2Frouter completed in 7 ms
13:01:07.260 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/prefixtest?route_type=prefix&application_id=integration-test-1321016467245 completed in 4 ms
13:01:07.267 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/fulltest/test.html?route_type=full&application_id=integration-test-1321016467245 completed in 5 ms
13:01:07.272 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/test-harness?route_type=full&application_id=integration-test-1321016467245 completed in 3 ms
13:01:07.279 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/redirect?route_type=full&application_id=integration-test-1321016467245 completed in 4 ms
13:01:07.284 [qtp909896860-112] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/this-route-does-not-exist-on-the-backend-server?route-type=full&application-id=integration-test-1321016467245 caused exception after 2 ms
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.285 [qtp909896860-112] WARN  org.eclipse.jetty.util.log - /router/routes/test/this-route-does-not-exist-on-the-backend-server
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.322 [qtp909896860-110] INFO  uk.gov.gds.router.util.HttpProxy$ - Proxying GET http://localhost:8080/router/fulltest/test.html
13:01:07.338 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /fulltest/test.html completed in 11 ms
13:01:07.338 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /route/fulltest/test.html completed in 48 ms
13:01:07.344 [qtp909896860-113] INFO  uk.gov.gds.router.util.HttpProxy$ - Proxying GET http://localhost:8080/router/prefixtest/bang/test.html
13:01:07.355 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /prefixtest/bang/test.html completed in 8 ms
13:01:07.355 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /route/prefixtest/bang/test.html completed in 13 ms
13:01:07.362 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016467357?backend_url=localhost%3A8080%2Frouter completed in 3 ms
13:01:07.369 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/prefixtest?route_type=prefix&application_id=integration-test-1321016467357 completed in 5 ms
13:01:07.375 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/fulltest/test.html?route_type=full&application_id=integration-test-1321016467357 completed in 4 ms
13:01:07.381 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/test-harness?route_type=full&application_id=integration-test-1321016467357 completed in 4 ms
13:01:07.387 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/redirect?route_type=full&application_id=integration-test-1321016467357 completed in 4 ms
13:01:07.392 [qtp909896860-113] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/this-route-does-not-exist-on-the-backend-server?route-type=full&application-id=integration-test-1321016467357 caused exception after 2 ms
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.392 [qtp909896860-113] WARN  org.eclipse.jetty.util.log - /router/routes/test/this-route-does-not-exist-on-the-backend-server
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.400 [qtp909896860-112] INFO  uk.gov.gds.router.util.HttpProxy$ - Proxying POST http://localhost:8080/router/test/test-harness
13:01:07.415 [qtp909896860-113] INFO  u.g.g.r.c.TestHarnessController - Response: <html>
        <head>
          <title>Test harness</title>
        </head>
        <body>
          second=chips
first=sausage
        </body>
      </html>
13:01:07.417 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /test/test-harness?second=chips&first=sausage completed in 15 ms
13:01:07.418 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /route/test/test-harness?second=chips&first=sausage completed in 21 ms
13:01:07.426 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016467421?backend_url=localhost%3A8080%2Frouter completed in 4 ms
13:01:07.432 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/prefixtest?route_type=prefix&application_id=integration-test-1321016467421 completed in 4 ms
13:01:07.438 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/fulltest/test.html?route_type=full&application_id=integration-test-1321016467421 completed in 4 ms
13:01:07.444 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/test-harness?route_type=full&application_id=integration-test-1321016467421 completed in 4 ms
13:01:07.449 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/redirect?route_type=full&application_id=integration-test-1321016467421 completed in 3 ms
13:01:07.453 [qtp909896860-112] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/this-route-does-not-exist-on-the-backend-server?route-type=full&application-id=integration-test-1321016467421 caused exception after 1 ms
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.454 [qtp909896860-112] WARN  org.eclipse.jetty.util.log - /router/routes/test/this-route-does-not-exist-on-the-backend-server
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.460 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /route/test/this-route-does-not-exist completed in 1 ms
13:01:07.466 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016467462?backend_url=localhost%3A8080%2Frouter completed in 2 ms
13:01:07.473 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/prefixtest?route_type=prefix&application_id=integration-test-1321016467462 completed in 5 ms
13:01:07.481 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/fulltest/test.html?route_type=full&application_id=integration-test-1321016467462 completed in 6 ms
13:01:07.489 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/test-harness?route_type=full&application_id=integration-test-1321016467462 completed in 5 ms
13:01:07.495 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/redirect?route_type=full&application_id=integration-test-1321016467462 completed in 4 ms
13:01:07.499 [qtp909896860-113] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/this-route-does-not-exist-on-the-backend-server?route-type=full&application-id=integration-test-1321016467462 caused exception after 2 ms
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.500 [qtp909896860-113] WARN  org.eclipse.jetty.util.log - /router/routes/test/this-route-does-not-exist-on-the-backend-server
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.507 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /route/test/this-route-does-not-exist-on-the-backend-server completed in 2 ms
13:01:07.514 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016467509?backend_url=localhost%3A8080%2Frouter completed in 3 ms
13:01:07.520 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/prefixtest?route_type=prefix&application_id=integration-test-1321016467509 completed in 4 ms
13:01:07.526 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/fulltest/test.html?route_type=full&application_id=integration-test-1321016467509 completed in 4 ms
13:01:07.531 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/test-harness?route_type=full&application_id=integration-test-1321016467509 completed in 3 ms
13:01:07.537 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/redirect?route_type=full&application_id=integration-test-1321016467509 completed in 4 ms
13:01:07.541 [qtp909896860-110] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/this-route-does-not-exist-on-the-backend-server?route-type=full&application-id=integration-test-1321016467509 caused exception after 2 ms
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.542 [qtp909896860-110] WARN  org.eclipse.jetty.util.log - /router/routes/test/this-route-does-not-exist-on-the-backend-server
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.549 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /route/test/this-route-returns-an-error completed in 2 ms
13:01:07.564 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016467559?backend_url=localhost%3A8080%2Frouter completed in 3 ms
13:01:07.584 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/prefixtest?route_type=prefix&application_id=integration-test-1321016467559 completed in 18 ms
13:01:07.589 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/fulltest/test.html?route_type=full&application_id=integration-test-1321016467559 completed in 3 ms
13:01:07.595 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/test-harness?route_type=full&application_id=integration-test-1321016467559 completed in 4 ms
13:01:07.600 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/redirect?route_type=full&application_id=integration-test-1321016467559 completed in 3 ms
13:01:07.604 [qtp909896860-112] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/this-route-does-not-exist-on-the-backend-server?route-type=full&application-id=integration-test-1321016467559 caused exception after 1 ms
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.605 [qtp909896860-112] WARN  org.eclipse.jetty.util.log - /router/routes/test/this-route-does-not-exist-on-the-backend-server
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.611 [qtp909896860-113] INFO  uk.gov.gds.router.util.HttpProxy$ - Proxying POST http://localhost:8080/router/test/test-harness?first=cheese
13:01:07.616 [qtp909896860-112] INFO  u.g.g.r.c.TestHarnessController - Response: <html>
        <head>
          <title>Test harness</title>
        </head>
        <body>
          second=chips
first=cheese
first=cheese
first=sausage
        </body>
      </html>
13:01:07.617 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /test/test-harness?second=chips&first=cheese completed in 4 ms
13:01:07.617 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /route/test/test-harness?second=chips&first=cheese completed in 7 ms
13:01:07.624 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016467619?backend_url=localhost%3A8080%2Frouter completed in 3 ms
13:01:07.630 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/prefixtest?route_type=prefix&application_id=integration-test-1321016467619 completed in 4 ms
13:01:07.634 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/fulltest/test.html?route_type=full&application_id=integration-test-1321016467619 completed in 3 ms
13:01:07.640 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/test-harness?route_type=full&application_id=integration-test-1321016467619 completed in 4 ms
13:01:07.645 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/redirect?route_type=full&application_id=integration-test-1321016467619 completed in 3 ms
13:01:07.648 [qtp909896860-110] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/this-route-does-not-exist-on-the-backend-server?route-type=full&application-id=integration-test-1321016467619 caused exception after 1 ms
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.649 [qtp909896860-110] WARN  org.eclipse.jetty.util.log - /router/routes/test/this-route-does-not-exist-on-the-backend-server
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.655 [qtp909896860-113] INFO  uk.gov.gds.router.util.HttpProxy$ - Proxying GET http://localhost:8080/router/test/test-harness?first=sausage&second=chips
13:01:07.660 [qtp909896860-110] INFO  u.g.g.r.c.TestHarnessController - Response: <html>
        <head>
          <title>Test harness</title>
        </head>
        <body>
          second=chips
first=sausage
        </body>
      </html>
13:01:07.661 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /test/test-harness?second=chips&first=sausage completed in 5 ms
13:01:07.661 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /route/test/test-harness?second=chips&first=sausage completed in 7 ms
13:01:07.667 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016467663?backend_url=localhost%3A8080%2Frouter completed in 2 ms
13:01:07.673 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/prefixtest?route_type=prefix&application_id=integration-test-1321016467663 completed in 4 ms
13:01:07.678 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/fulltest/test.html?route_type=full&application_id=integration-test-1321016467663 completed in 3 ms
13:01:07.684 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/test-harness?route_type=full&application_id=integration-test-1321016467663 completed in 4 ms
13:01:07.689 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/redirect?route_type=full&application_id=integration-test-1321016467663 completed in 3 ms
13:01:07.693 [qtp909896860-112] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/this-route-does-not-exist-on-the-backend-server?route-type=full&application-id=integration-test-1321016467663 caused exception after 2 ms
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.694 [qtp909896860-112] WARN  org.eclipse.jetty.util.log - /router/routes/test/this-route-does-not-exist-on-the-backend-server
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.701 [qtp909896860-113] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/invalid/prefix/route?route_type=prefix&application_id=integration-test-1321016467663 caused exception after 1 ms
java.lang.RuntimeException: Invalid route: prefix routes may only have one segment
	at uk.gov.gds.router.model.Route$.apply(model.scala:21) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3$$anonfun$apply$2.apply(RouterApiController.scala:24) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3$$anonfun$apply$2.apply(RouterApiController.scala:22) ~[classes/:na]
	at uk.gov.gds.router.mongodb.MongoDatabase$.onSameDatabaseServer(MongoDatabase.scala:18) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:22) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.702 [qtp909896860-113] WARN  org.eclipse.jetty.util.log - /router/routes/invalid/prefix/route
java.lang.RuntimeException: Invalid route: prefix routes may only have one segment
	at uk.gov.gds.router.model.Route$.apply(model.scala:21) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3$$anonfun$apply$2.apply(RouterApiController.scala:24) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3$$anonfun$apply$2.apply(RouterApiController.scala:22) ~[classes/:na]
	at uk.gov.gds.router.mongodb.MongoDatabase$.onSameDatabaseServer(MongoDatabase.scala:18) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:22) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.712 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016467707?backend_url=localhost%3A8080%2Frouter completed in 3 ms
13:01:07.718 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/prefixtest?route_type=prefix&application_id=integration-test-1321016467707 completed in 4 ms
13:01:07.724 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/fulltest/test.html?route_type=full&application_id=integration-test-1321016467707 completed in 4 ms
13:01:07.729 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/test-harness?route_type=full&application_id=integration-test-1321016467707 completed in 3 ms
13:01:07.734 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/redirect?route_type=full&application_id=integration-test-1321016467707 completed in 3 ms
13:01:07.738 [qtp909896860-113] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/this-route-does-not-exist-on-the-backend-server?route-type=full&application-id=integration-test-1321016467707 caused exception after 1 ms
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.738 [qtp909896860-113] WARN  org.eclipse.jetty.util.log - /router/routes/test/this-route-does-not-exist-on-the-backend-server
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.746 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/valid/full/route?route_type=full&application_id=integration-test-1321016467707 completed in 3 ms
13:01:07.752 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016467748?backend_url=localhost%3A8080%2Frouter completed in 2 ms
13:01:07.758 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/prefixtest?route_type=prefix&application_id=integration-test-1321016467748 completed in 4 ms
13:01:07.762 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/fulltest/test.html?route_type=full&application_id=integration-test-1321016467748 completed in 2 ms
13:01:07.768 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/test-harness?route_type=full&application_id=integration-test-1321016467748 completed in 4 ms
13:01:07.773 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/redirect?route_type=full&application_id=integration-test-1321016467748 completed in 3 ms
13:01:07.777 [qtp909896860-110] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/this-route-does-not-exist-on-the-backend-server?route-type=full&application-id=integration-test-1321016467748 caused exception after 1 ms
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.777 [qtp909896860-110] WARN  org.eclipse.jetty.util.log - /router/routes/test/this-route-does-not-exist-on-the-backend-server
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.785 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/a-prefix-route?route_type=prefix&application_id=integration-test-1321016467748 completed in 3 ms
13:01:07.791 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/a-prefix-route/foo/bar?route_type=full&application_id=integration-test-1321016467748 completed in 3 ms
13:01:07.797 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016467793?backend_url=localhost%3A8080%2Frouter completed in 2 ms
13:01:07.802 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/prefixtest?route_type=prefix&application_id=integration-test-1321016467793 completed in 3 ms
13:01:07.807 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/fulltest/test.html?route_type=full&application_id=integration-test-1321016467793 completed in 3 ms
13:01:07.813 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/test-harness?route_type=full&application_id=integration-test-1321016467793 completed in 4 ms
13:01:07.818 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/redirect?route_type=full&application_id=integration-test-1321016467793 completed in 3 ms
13:01:07.821 [qtp909896860-110] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/this-route-does-not-exist-on-the-backend-server?route-type=full&application-id=integration-test-1321016467793 caused exception after 1 ms
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.822 [qtp909896860-110] WARN  org.eclipse.jetty.util.log - /router/routes/test/this-route-does-not-exist-on-the-backend-server
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.830 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/foo/bar?route_type=full&application_id=integration-test-1321016467793 completed in 3 ms
13:01:07.834 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/foo/bar?route_type=full&application_id=integration-test-1321016467793 completed in 2 ms
13:01:07.841 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016467836?backend_url=localhost%3A8080%2Frouter completed in 3 ms
13:01:07.846 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/prefixtest?route_type=prefix&application_id=integration-test-1321016467836 completed in 3 ms
13:01:07.851 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/fulltest/test.html?route_type=full&application_id=integration-test-1321016467836 completed in 3 ms
13:01:07.856 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/test-harness?route_type=full&application_id=integration-test-1321016467836 completed in 3 ms
13:01:07.861 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/redirect?route_type=full&application_id=integration-test-1321016467836 completed in 3 ms
13:01:07.865 [qtp909896860-110] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/this-route-does-not-exist-on-the-backend-server?route-type=full&application-id=integration-test-1321016467836 caused exception after 2 ms
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.866 [qtp909896860-110] WARN  org.eclipse.jetty.util.log - /router/routes/test/this-route-does-not-exist-on-the-backend-server
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.873 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016467869?backend_url=localhost%3A8080%2Frouter completed in 2 ms
13:01:07.877 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/prefixtest?route_type=prefix&application_id=integration-test-1321016467869 completed in 2 ms
13:01:07.882 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/fulltest/test.html?route_type=full&application_id=integration-test-1321016467869 completed in 3 ms
13:01:07.886 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/test-harness?route_type=full&application_id=integration-test-1321016467869 completed in 2 ms
13:01:07.891 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/redirect?route_type=full&application_id=integration-test-1321016467869 completed in 3 ms
13:01:07.895 [qtp909896860-113] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/this-route-does-not-exist-on-the-backend-server?route-type=full&application-id=integration-test-1321016467869 caused exception after 1 ms
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.895 [qtp909896860-113] WARN  org.eclipse.jetty.util.log - /router/routes/test/this-route-does-not-exist-on-the-backend-server
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.902 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /applications/integration-test-1321016467898?backend_url=localhost%3A8080%2Frouter completed in 2 ms
13:01:07.906 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/prefixtest?route_type=prefix&application_id=integration-test-1321016467898 completed in 2 ms
13:01:07.911 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/fulltest/test.html?route_type=full&application_id=integration-test-1321016467898 completed in 3 ms
13:01:07.915 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/test-harness?route_type=full&application_id=integration-test-1321016467898 completed in 2 ms
13:01:07.919 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/redirect?route_type=full&application_id=integration-test-1321016467898 completed in 2 ms
13:01:07.926 [qtp909896860-112] WARN  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/test/this-route-does-not-exist-on-the-backend-server?route-type=full&application-id=integration-test-1321016467898 caused exception after 5 ms
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) [management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) [guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) [guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.927 [qtp909896860-112] WARN  org.eclipse.jetty.util.log - /router/routes/test/this-route-does-not-exist-on-the-backend-server
java.util.NoSuchElementException: key not found: application_id
	at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.default(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.MapLike$class.apply(MapLike.scala:135) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anon$1.apply(ScalatraKernel.scala:341) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:19) ~[classes/:na]
	at uk.gov.gds.router.controller.RouterApiController$$anonfun$3.apply(RouterApiController.scala:17) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:211) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$invoke$1.apply(ScalatraKernel.scala:210) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$class.withRouteMultiParams(ScalatraKernel.scala:270) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.withRouteMultiParams(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.invoke(ScalatraKernel.scala:209) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.invoke(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:195) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1$$anonfun$apply$2.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.flatMap(Option.scala:147) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:194) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$runRoutes$1.apply(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.collection.immutable.Stream.flatMap(Stream.scala:213) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.runRoutes(ScalatraKernel.scala:193) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.runRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:164) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply$mcV$sp(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$1.apply(ScalatraFilter.scala:40) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$6.apply(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.Option.getOrElse(Option.scala:109) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.executeRoutes(ScalatraKernel.scala:165) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.executeRoutes(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ScalatraKernel.scala:138) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1$$anonfun$apply$mcV$sp$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply$mcV$sp(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraKernel$$anonfun$handle$1.apply(ScalatraKernel.scala:136) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraKernel$class.handle(ScalatraKernel.scala:135) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.handle(ControllerBase.scala:7) ~[classes/:na]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply$mcV$sp(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at org.scalatra.ScalatraFilter$$anonfun$doFilter$1.apply(ScalatraFilter.scala:30) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57) ~[scala-library.jar:na]
	at org.scalatra.ScalatraFilter$class.doFilter(ScalatraFilter.scala:29) ~[scalatra_2.9.0-1-2.0.1.jar:2.0.1]
	at uk.gov.gds.router.controller.ControllerBase.doFilter(ControllerBase.scala:7) ~[classes/:na]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.gu.management.request.RequestLoggingFilter.doHttpFilter(RequestLoggingFilter.scala:77) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.gu.management.AbstractHttpFilter.doFilter(AbstractHttpFilter.scala:13) ~[management_2.9.0-1-4.3.jar:4.3]
	at com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:162) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118) ~[guice-servlet-3.0-rc2.jar:na]
	at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113) ~[guice-servlet-3.0-rc2.jar:na]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323) ~[jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:474) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517) [jetty-security-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:934) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404) [jetty-servlet-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:869) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.Server.handle(Server.java:346) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:581) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1057) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220) [jetty-http-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411) [jetty-server-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:526) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:41) [jetty-io-7.3.1.v20110307.jar:7.3.1.v20110307]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528) [jetty-util-7.3.1.v20110307.jar:7.3.1.v20110307]
	at java.lang.Thread.run(Thread.java:680) [na:1.6.0_29]
13:01:07.936 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/foo?route_type=prefix&application_id=integration-test-1321016467869 completed in 4 ms
13:01:07.941 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - POST /routes/football?route_type=full&application_id=integration-test-1321016467898 completed in 3 ms
13:01:07.944 [qtp909896860-110] INFO  uk.gov.gds.router.util.HttpProxy$ - Proxying GET http://localhost:8080/router/foo
13:01:07.949 [qtp909896860-113] INFO  u.g.g.r.c.TestHarnessController - Response: <html>
        <head>
          <title>Test harness</title>
        </head>
        <body>
          fooOnly
        </body>
      </html>
13:01:07.949 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /foo completed in 4 ms
13:01:07.949 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /route/foo completed in 6 ms
13:01:07.952 [qtp909896860-112] INFO  uk.gov.gds.router.util.HttpProxy$ - Proxying GET http://localhost:8080/router/foo/
13:01:07.957 [qtp909896860-113] INFO  u.g.g.r.c.TestHarnessController - Response: <html>
        <head>
          <title>Test harness</title>
        </head>
        <body>
          fooOnly
        </body>
      </html>
13:01:07.958 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /foo/ completed in 3 ms
13:01:07.958 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /route/foo/ completed in 7 ms
13:01:07.961 [qtp909896860-110] INFO  uk.gov.gds.router.util.HttpProxy$ - Proxying GET http://localhost:8080/router/foo/bar
13:01:07.965 [qtp909896860-113] INFO  u.g.g.r.c.TestHarnessController - Response: <html>
        <head>
          <title>Test harness</title>
        </head>
        <body>
          fooOnly
        </body>
      </html>
13:01:07.965 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /foo/bar completed in 3 ms
13:01:07.965 [qtp909896860-110] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /route/foo/bar completed in 5 ms
13:01:07.968 [qtp909896860-112] INFO  uk.gov.gds.router.util.HttpProxy$ - Proxying GET http://localhost:8080/router/football
13:01:07.972 [qtp909896860-113] INFO  u.g.g.r.c.TestHarnessController - Response: <html>
        <head>
          <title>Test harness</title>
        </head>
        <body>
          football
        </body>
      </html>
13:01:07.972 [qtp909896860-113] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /football completed in 3 ms
13:01:07.973 [qtp909896860-112] INFO  u.g.g.r.m.RouterRequestLoggingFilter - GET /route/football completed in 6 ms
[0m[[0minfo[0m] [0m[32mRouterIntegrationTest:[0m[0m
[0m[[0minfo[0m] [0m[32m- can create and delete applications[0m[0m
[0m[[0minfo[0m] [0m[32m- canot create route on application that does not exist[0m[0m
[0m[[0minfo[0m] [0m[32m- Can create prefix routes[0m[0m
[0m[[0minfo[0m] [0m[32m- can proxy files from backend server[0m[0m
[0m[[0minfo[0m] [0m[32m- can post form submissions to backend server[0m[0m
[0m[[0minfo[0m] [0m[32m- Returns an error when route is not defined[0m[0m
[0m[[0minfo[0m] [0m[32m- Returns 404 when backend returns 404[0m[0m
[0m[[0minfo[0m] [0m[31m- Returns a 500 when the backend returns 500 *** FAILED ***[0m[0m
[0m[[0minfo[0m] [0m[31m  false was not true (RouterIntegrationTest.scala:134)[0m[0m
[0m[[0minfo[0m] [0m[32m- can post form submissions featuring duplicated parameters to backend server[0m[0m
[0m[[0minfo[0m] [0m[32m- query parameters are passed to backend server[0m[0m
[0m[[0minfo[0m] [0m[32m- Cannot create prefix routes with more than one path element[0m[0m
[0m[[0minfo[0m] [0m[32m- Can create full routes with more than one path element[0m[0m
[0m[[0minfo[0m] [0m[32m- cannot create a full route that conficts with an existing prefix route[0m[0m
[0m[[0minfo[0m] [0m[32m- Cannot create a full route that conflicts with an existing full route[0m[0m
[0m[[0minfo[0m] [0m[32m- Overlapping prefix routes should be possible and should map to the correct application[0m[0m
[0m[[0minfo[0m] [0m[32mRoutesTest:[0m[0m
[0m[[0minfo[0m] [0m[32m- can create and retrieve full routes[0m[0m
[0m[[0minfo[0m] [0m[32m- can create and retrieve prefix routes[0m[0m
[0m[[0minfo[0m] [0m[32m- can match exact prefix route[0m[0m
[0m[[0minfo[0m] [0m[32m- can match prefix route with trailing slash[0m[0m
[0m[[0minfo[0m] [0m[32m- can delete routes for application[0m[0m
[0m[[0minfo[0m] [0m[32m- can delete routes[0m[0m
[0m[[31merror[0m] [0mFailed: : Total 24, Failed 1, Errors 0, Passed 23, Skipped 0[0m
[0m[[31merror[0m] [0mFailed tests:[0m
[0m[[31merror[0m] [0m	uk.gov.gds.router.integration.RouterIntegrationTest[0m
[0m[[31merror[0m] [0m{file:/Volumes/raid/mwall/dev/gov/alphagov/router/}routerApp/test:[31mtest[0m: Tests unsuccessful[0m
[0m[[31merror[0m] [0mTotal time: 12 s, completed Nov 11, 2011 1:01:08 PM[0m
